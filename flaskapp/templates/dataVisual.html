{% extends 'base.html' %}

{% block title %}JPL UCR Project - Visualize Data{% endblock %}

{% block content %}
    <div>
        <h1 style="text-align: center">{{title}}</h1>
    </div>
	<div id="mapid" style="width:100%;height:400px;margin-bottom:40px;"></div>
	<script>
        // create a satellite layer
        var layergroup_mapbox = L.layerGroup();
        var mapbox_layer = L.tileLayer(
            'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFrYmEwMDIiLCJhIjoiY2syOW40b3NqMHdhazNsbXNybHA2dnAzdSJ9.ihFn0ArkcGyiig4pK58uOQ', 
            {
        	   attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
        	   id: 'mapbox.satellite',
        	   maxZoom:20,
            }
        );
        mapbox_layer.addTo(layergroup_mapbox);

        // set south-west and north-east bounds for nasa image
		var southWest = L.latLng(29.4898508766, -94.1802658885);
        var northEast = L.latLng(30.906667, -95.285761);
        var mybounds = L.latLngBounds(southWest, northEast);

        // load custom tile layer with custom nasa data
        var layergroup_nasa = L.layerGroup();
        var nasa_layer = L.tileLayer('/static/paulitiles/{z}/{x}/{-y}.png', {
        	bounds:mybounds,
        	opacity: 0.7, 
        	attribution: "",
			minNativeZoom: 0,
			maxNativeZoom: 16,
			minZoom: 0,
			maxZoom: 20,
        });
        nasa_layer.addTo(layergroup_nasa);

        // Create Map data with open street view data
        var map = L.map('mapid', {
            center: [30.1982589383, -94.7330134442],
            zoom: 12,
            minZoom: 1,
            maxZoom: 20,
            layers: [mapbox_layer,nasa_layer]
        });

        var overlays = {
            "OpenStreetMap": mapbox_layer,
            "Layer": nasa_layer
        };

        // Add base layers
        L.control.layers(null, overlays, {collapsed: false}).addTo(map);

        // Fit to overlay bounds (SW and NE points with (lat, lon))
        map.fitBounds([[29.4898508766, -94.1802658885], [30.906667, -95.285761]]);

        
	</script>

{% endblock %}
